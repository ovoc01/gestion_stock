package com.colasmadagascar.stockinventory.serviceexp;

import java.time.LocalDate;
import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;

@Repository

public interface ServiceExploitantRepository extends JpaRepository<ServiceExploitant, Long> {
   @Query(nativeQuery = true, value = "INSERT INTO travailler_dans (usr_id, service_id) VALUES (?1, ?2)")
   @Modifying
   void addUtilisateurService(Long usrId, Long serviceId);

   @Query(nativeQuery = true, value = "INSERT INTO travailler_dans (usr_id, service_id,depuis) VALUES (?1, ?2,?3)")
   @Modifying
   void addUtilisateurService(Long usrId, Long serviceId, LocalDate debut);

   @Query(nativeQuery = true, value = "SELECT * FROM v_utilisateur_service_lib WHERE usrId = ?1")
   List<UtilisateurServiceDTO> getUtilisateurService(Long usrId);
}